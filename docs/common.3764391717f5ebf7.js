"use strict";(self.webpackChunkcoin_ui=self.webpackChunkcoin_ui||[]).push([[592],{9319:(w,h,u)=>{u.d(h,{h:()=>i,t:()=>_});var t=u(1571),p=u(6895),c=u(77);function A(a,g){if(1&a&&(t.ynx(0),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"currency"),t.qZA(),t.BQk()),2&a){const n=t.oxw();t.xp6(2),t.hij("Volume: ",t.xi3(3,2,n.asset.volumeUsd24Hr,"1.0-0"),""),t.xp6(3),t.hij("Market Cap: ",t.lcZ(6,5,n.asset.marketCapUsd),"")}}const s=function(a,g){return{"asset-details-up":a,"asset-details-down":g}};function e(a,g){if(1&a&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2,"Portfolio Performance"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Price Average: "),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"currency"),t.qZA()(),t.TgZ(8,"p"),t._uU(9,"Total Return: "),t.TgZ(10,"span",2),t._uU(11),t.ALo(12,"currency"),t.qZA()(),t.TgZ(13,"p"),t._uU(14),t.qZA(),t.TgZ(15,"p"),t._uU(16),t.ALo(17,"currency"),t.qZA(),t.BQk()),2&a){const n=t.oxw();t.xp6(6),t.hij(" ",t.lcZ(7,5,n.asset.priceAverage)," "),t.xp6(4),t.Q6J("ngClass",t.WLB(11,s,n.totalReturnChange,!n.totalReturnChange)),t.xp6(1),t.hij(" ",t.lcZ(12,7,n.asset.totalReturn)," "),t.xp6(3),t.hij("Quantity: ",n.asset.quantity,""),t.xp6(2),t.hij("Total Value: ",t.lcZ(17,9,n.asset.totalValue),"")}}const l=function(a){return["/asset",a]};function r(a,g){if(1&a&&(t.TgZ(0,"a",5),t._uU(1," View Details "),t.qZA()),2&a){const n=t.oxw();t.Q6J("routerLink",t.VKq(1,l,n.asset.id))}}var i=(()=>{return(a=i||(i={}))[a.ListView=0]="ListView",a[a.AssetDetailsView=1]="AssetDetailsView",a[a.WalletView=2]="WalletView",i;var a})();let _=(()=>{class a{constructor(){this.componentState=i.ListView,this.dailyPositiveChange=!1,this.totalReturnChange=!1,this.ComponentState=i}ngOnInit(){this.asset&&(this.dailyPositiveChange=!this.asset.changePercent24Hr.includes("-"),this.componentState==i.WalletView&&(this.totalReturnChange=this.asset.totalReturn>0))}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-asset-details"]],inputs:{asset:"asset",componentState:"componentState"},decls:15,vars:17,consts:[[1,"asset-details"],[4,"ngIf"],[3,"ngClass"],[3,"routerLink",4,"ngIf"],[1,"divider"],[3,"routerLink"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"h4"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.YNc(6,A,7,7,"ng-container",1),t.TgZ(7,"p"),t._uU(8,"Daily Percent Change: "),t.TgZ(9,"span",2),t._uU(10),t.ALo(11,"slice"),t.qZA()(),t.YNc(12,e,18,14,"ng-container",1),t.YNc(13,r,2,3,"a",3),t._UZ(14,"div",4),t.qZA()),2&n&&(t.xp6(2),t.AsE("",o.asset.name," (",o.asset.symbol,")"),t.xp6(2),t.hij("Current Price: ",t.lcZ(5,8,o.asset.priceUsd),""),t.xp6(2),t.Q6J("ngIf",o.componentState==o.ComponentState.ListView||o.componentState==o.ComponentState.AssetDetailsView),t.xp6(3),t.Q6J("ngClass",t.WLB(14,s,o.dailyPositiveChange,!o.dailyPositiveChange)),t.xp6(1),t.hij(" ",t.Dn7(11,10,o.asset.changePercent24Hr,0,5),"% "),t.xp6(2),t.Q6J("ngIf",o.componentState==o.ComponentState.WalletView),t.xp6(1),t.Q6J("ngIf",o.componentState==o.ComponentState.ListView||o.componentState==o.ComponentState.WalletView))},dependencies:[p.mk,p.O5,c.yS,p.OU,p.JJ,p.H9],styles:[".asset-details-down[_ngcontent-%COMP%]{color:#f08080}.asset-details-up[_ngcontent-%COMP%]{color:#90ee90}.divider[_ngcontent-%COMP%]{border-bottom:1px solid black;margin:15px 0}"]}),a})()},6441:(w,h,u)=>{u.d(h,{s:()=>p});var t=u(1571);let p=(()=>{class c{constructor(){}getWallet(s){if(this.wallet)return this.wallet;{const e=this.getWalletInLocalStorage(s);return console.log("wallet in local storage?",e),this.wallet=e??{balance:0,assets:{}},this.wallet}}addToWallet(s,e){const l=this.getOrCreateWalletAsset(s,e.assetId),r=parseFloat((parseFloat(e.pricePerUnit)*parseFloat(e.quantity)).toFixed(2)),i=parseFloat(e.quantity),_=l.quantity;return l.quantity+=i,l.priceAverage=(l.priceAverage*_+r)/l.quantity,this.wallet.balance-=r,this.setWalletAssetInWallet(s,e.assetId,l),console.log("updated wallet",this.wallet),this.setWalletInLocalStorage(s),!0}removeFromWallet(s,e){const l=this.getWalletAsset(s,e.assetId),r=parseFloat(e.quantity);if(null!=l&&r<=l.quantity){const i=this.getWalletAsset(s,e.assetId),_=parseFloat((parseFloat(e.pricePerUnit)*parseFloat(e.quantity)).toFixed(2));return i.quantity-=r,this.wallet.balance+=_,0==i.quantity?delete this.wallet.assets[e.assetId]:this.setWalletAssetInWallet(s,e.assetId,i),console.log("updated wallet",this.wallet),this.setWalletInLocalStorage(s),!0}return console.log("unable to perform transaction"),!1}getOrCreateWalletAsset(s,e){const l=this.getWallet(s);let r={};return Object.keys(l.assets).includes(e)||(l.assets[e]={},l.assets[e].quantity=0,l.assets[e].priceAverage=0),r=l.assets[e],r}getWalletAsset(s,e){const l=this.getWallet(s);return Object.keys(l.assets).includes(e)?l.assets[e]:null}setWalletAssetInWallet(s,e,l){this.wallet=this.getWallet(s),this.wallet.assets[e]=l}setWalletInLocalStorage(s){window.localStorage.setItem(s.toString(),JSON.stringify(this.wallet))}getWalletInLocalStorage(s){const e=window.localStorage.getItem(s.toString());return JSON.parse(e)}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);